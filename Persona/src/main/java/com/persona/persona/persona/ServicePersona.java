package com.persona.persona.persona;

import com.persona.persona.modelo.BeanPersona;
import com.persona.persona.modelo.DaoPersona;
import com.persona.persona.utils.ResultAction;

import java.util.List;

public class ServicePersona {
    DaoPersona daoPersona = new DaoPersona();

    public List<BeanPersona> getAll(){
        return daoPersona.findAll();
    }

    public ResultAction save(BeanPersona persona){
        ResultAction result = new ResultAction();
        if (daoPersona.save(persona)){
            result.setResult(true);
            result.setMessage("");
            result.setStatus(200);
        }else{
            result.setResult(false);
            result.setMessage("Ocurri贸 un error al registrar Persona");
            result.setStatus(400);
        }
        return result;
    }


    public ResultAction update(BeanPersona persona){
        ResultAction result = new ResultAction();
        if (daoPersona.update(persona)){
            result.setStatus(200);
            result.setResult(false);
            result.setMessage("Persona actualizado correctamente");
        }else{
            result.setStatus(400);
            result.setResult(true);
            result.setMessage("Ocurri贸 un error");
        }
        return result;
    }

    public ResultAction delete(String id){
        ResultAction result = new ResultAction();
        try{
            if (daoPersona.delete(Long.parseLong(id))){
                result.setStatus(200);
                result.setResult(false);
                result.setMessage("Persona eliminado correctamente");
            }else{
                result.setStatus(400);
                result.setResult(true);
                result.setMessage("Ocurri贸 un error");
            }
        }catch (NumberFormatException e){
            result.setStatus(400);
            result.setResult(true);
            result.setMessage("Ocurri贸 un error");
        }
        return result;
    }

    public BeanPersona persona(Long id){
        return  daoPersona.findOne(id);
    }
}
